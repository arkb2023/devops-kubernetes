apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- namespace.yaml
- persistentvolumeclaim.yaml

# Common resources
- ../../apps/the-project/

# Gateway API & Routes
# Routes references the service.
# Keep this after service creation (from this-project/*service.yaml)
- gateway.yaml
- todo-app-route.yaml
- todo-backend-route.yaml

# Image overrides (runtime injection)
images:
- name: todo-app
  newName: asia-south1-docker.pkg.dev/dwk-gke-480015/dwk-gke-repository/todo-app
  newTag: "latest"  # Overridden by GitHub Actions

- name: todo-backend
  newName: asia-south1-docker.pkg.dev/dwk-gke-480015/dwk-gke-repository/todo-backend  
  newTag: "latest"